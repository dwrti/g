name: Large Video Direct Uploader

on:
  workflow_dispatch:
    inputs:
      video_url:
        description: 'ุฑุงุจุท ุงูููุฏูู (ูู ุณุจูุณุชูู ุฃู ุบูุฑู)'
        required: true
      file_name:
        description: 'ุงุณู ุงูููู ุงูุฌุฏูุฏ'
        required: true

jobs:
  upload_large:
    runs-on: ubuntu-latest
    steps:
      - name: Transferring Video
        run: |
          # 1. ุชูุธูู ุงูุงุณู
          SAFE_NAME=$(echo "${{ github.event.inputs.file_name }}" | sed 's/\.mp4//g' | tr ' ' '_').mp4

          # 2. ุงูุชุญููู (ุงุณุชุฎุฏุงู -k ูุชุฌุงูุฒ ูุดุงูู ุงูุฃูุงู ุงููู ุทูุนุช ูู)
          echo "โฌ๏ธ ุฌุงุฑู ุชุญููู ุงูููุทุน..."
          curl -kL "${{ github.event.inputs.video_url }}" -o "$SAFE_NAME"

          # 3. ุงูุฑูุน ููููุน Quax (ูุณูุญ ุญุชู 500MB)
          echo "๐ค ุฌุงุฑู ุงูุฑูุน ูุงูุญุตูู ุนูู ุฑุงุจุท ูุจุงุดุฑ..."
          # ุงุณุชุฎุฏููุง -k ููุง ุฃูุถุงู ูุถูุงู ุนุฏู ุญุฏูุซ SSL error
          DIRECT_URL=$(curl -k -F "file=@$SAFE_NAME" https://quax.org/api/upload)

          # 4. ุงููุชูุฌุฉ ุงูููุงุฆูุฉ
          echo "--------------------------------------------------"
          echo "โ ุชู ุงูุฑูุน ุจูุฌุงุญ (ุฃูุจุฑ ูู 200MB)!"
          echo "๐ ุงูุฑุงุจุท ุงููุจุงุดุฑ: $DIRECT_URL"
          echo "--------------------------------------------------"
