name: Gofile Custom Uploader

on:
  workflow_dispatch:
    inputs:
      video_url:
        description: 'Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù‚Ø·Ø¹ Ù‡Ù†Ø§'
        required: true
      file_name:
        description: 'Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù (Ø¨Ø¯ÙˆÙ† .mp4)'
        required: true

jobs:
  upload_job:
    runs-on: ubuntu-latest
    steps:
      - name: Download and Upload
        run: |
          # Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø°ÙŠ Ø§Ø®ØªØ±ØªÙ‡
          curl -L "${{ github.event.inputs.video_url }}" -o "${{ github.event.inputs.file_name }}.mp4"
          
          # Ø¬Ù„Ø¨ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØ§Ù„Ø±ÙØ¹
          SERVER=$(curl -s https://api.gofile.io/getServer | jq -r '.data.server')
          RESULT=$(curl -F "file=@${{ github.event.inputs.file_name }}.mp4" "https://${SERVER}.gofile.io/uploadFile")
          
          # Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
          echo "--------------------------------------------------"
          echo "âœ… Ø§Ù„Ù…Ù„Ù Ø¬Ø§Ù‡Ø² Ø§Ù„Ø¢Ù†!"
          echo "ğŸ”— Ø§Ù„Ø±Ø§Ø¨Ø·: $(echo $RESULT | jq -r '.data.downloadPage')"
          echo "--------------------------------------------------"
